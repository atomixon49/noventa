<IfModule mod_rewrite.c>
  RewriteEngine On

  # Permitir acceso directo a index.html
  RewriteRule ^index\.html$ - [L]

  # Excluir archivos estáticos de Next.js y otros recursos
  RewriteCond %{REQUEST_URI} !^/_next/ [NC]
  RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot|json|txt)$ [NC]

  # Si el archivo o directorio existe físicamente, servirlo
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # Si existe un archivo .html para esta ruta (sin extensión), servirlo
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}.html -f
  RewriteRule ^(.*)$ $1.html [L]

  # Fallback: redirigir todo lo demás a index.html
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
